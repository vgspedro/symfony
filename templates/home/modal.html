<style>
.f-24{font-size:24px}
.f-14{font-size:14px}
.f-18{font-size:18px}
.f-36{font-size:36px}
.pointer{cursor:pointer}
.w-54{width:54px}
.h-58{height:58px}
.h-54{height:54px}
.dis-position{position: absolute;font-size: 32px; margin: 6px -13px}
.bold{font-weight: bold}
.months, .days, .show-datetime{max-width: 800px}
.op-20{opacity:0.2}
.op-40{opacity:0.4}
.op-60{opacity:0.6}
.op-80{opacity:0.8}

@media (max-width: 580px){
.zoom-78{zoom: 78%}
.days{padding: 0px}
.mb-4-540{margin-bottom: 0px!important}
.modal-body-full {top:54px}
}

@media (max-width: 480px){
.zoom-74{zoom: 74%}}
.col-1-7 {-webkit-box-flex: 0;-ms-flex: 0 0 14.285714%;flex: 0 0 14.285714%;max-width: 14.285714%}
.bootstrap-datetimepicker-widget table th,.bootstrap-datetimepicker-widget table td.day {height: 48px;line-height: 48px;width:54px}

</style>

<div id="fsModal" class="modal modal-full animated fade"tabindex="-1" role="dialog"aria-labelledby="myModalLabel" aria-hidden="true">
  <!-- dialog -->
  <div class="modal-dialog modal-dialog-full">
    <!-- content -->
    <div class="modal-content modal-content-full">
      <!-- header -->
      <div class="modal-header modal-header-full">
       <h4 class="text-center">{% trans %}info.choose_a_date{% endtrans %}</h4>
          <span class="pointer mr-2" style="margin-top:-6px"data-dismiss="modal"><i class="icon-times"></i></span>
      </div>
      <!-- header -->
      <!-- body -->
      <div class="modal-body modal-body-full">
        <div class="container months">
          <div class="row f-24 mb-4 mb-4-540">
            <div class='col-md-3 col-sm-0 d-none d-lg-block d-xl-block d-md-block'>&nbsp;</div>
            <div class='col-md-6 col-sm-12'>
              <div class="form-group">
                <input type='text' class="form-control text-center pointer bold" id='datetimepicker' readonly/>
              </div>
            </div>
          </div>
        </div>

        <div class="container days">

        <div class="row f-24">

          <div class="col-sm-1 col-xs-3 col-3 text-left" onclick="getWeek(0)">
            <i class="icon-chevron-left pointer"></i>
          </div>

          <div class="col-sm-0 col-xs-6 col-6 text-center d-block d-sm-none">{%trans%}info.week{%endtrans%}</div>
          
          <div class="col-xs-3 text-right col-3 d-block d-sm-none" onclick="getWeek(1)">
            <i class="icon-chevron-right pointer"></i>
          </div>

          <div class="col-sm-10 col-xs-12 text-center f-14 zoom-78 zoom-74">

            <div class="row bold" style="color:#000">
        

              <div class="col-1-7" data-date="09/12/2019">
                <p class="mt-2">Seg 9</p>
               <div class="mb-2 disabled op-60 btn btn-danger btn-outline-danger px-1 py-1 w-54 h-54">
                <i class="icon-ban dis-position"></i>
              </div>
              <br>
            </div>



            <div class="col-1-7" data-date="10/12/2019">
              <p class="mt-2">Ter 10</p>
              <div data-evt="5" data-date="10/12/2019 09:30" onclick="getEvent(this)"  class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br>09:30
              </div>
              <br>
              <div data-evt="5" data-date="10/12/2019 15:30" onclick="getEvent(this)"  class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br>15:30
              </div>
              <br>
              <div data-evt="2" data-date="10/12/2019 17:30" onclick="getEvent(this)"  class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br>17:30
              </div>
              <br>
            </div>
            
            <div class="col-1-7" data-date="11/12/2019">
              <p class="mt-2">Qua 11</p>
               <div class="mb-2 disabled op-60 btn btn-danger btn-outline-danger px-1 py-1 w-54 h-54">
                <i class="icon-ban dis-position"></i>
              </div>
              <br>
            </div>
            <div class="col-1-7" data-date="12/12/2019">
              <p class="mt-2">Qui 12</p>
              <div data-evt="6" data-date="12/12/2019 09:30" onclick="getEvent(this)" class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 pointer w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br>09:30
              </div>
              <br>
            </div>
            <div class="col-1-7" data-date="13/12/2019">
              <p class="mt-2">Sex 13</p>
              <div data-evt="7" data-date="13/12/2019 09:30" onclick="getEvent(this)"  class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 pointer w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br>09:30
              </div>
              <br>
            </div>

            <div class="col-1-7" data-date="14/12/2019">
              <p class="mt-2">SÃ¡b 14</p>
              <div data-evt="8" data-date="14/12/2019 09:30" onclick="getEvent(this)"  class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 pointer w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br> 09:30
              </div>
              <br>
              <div data-evt="9" data-date="14/12/2019 11:30" onclick="getEvent(this)"  class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 pointer w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br> 11:30
              </div>
              <br>
              <div data-evt="10" data-date="14/12/2019 15:30" onclick="getEvent(this)" class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 pointer w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br> 15:30
              </div>
              <br>
              <div data-evt="3" data-date="14/12/2019 17:30" onclick="getEvent(this)" class="mb-2 btn btn-primary btn-outline-primary px-1 py-1 pointer w-54 h-54" style="border: 1px solid #1089ff !important">
                <i class="icon-clock-o"></i><br> 17:30
              </div>
          </div>
          <div class="col-1-7" data-date="15/12/2019">
            <p class="mt-2">Dom 15</p>
            <div class="mb-2 disabled op-60 btn btn-danger btn-outline-danger px-1 py-1 w-54 h-54">
              <i class="icon-ban dis-position"></i>
            </div>
            <br>
          </div>

          </div>
          </div>

          <div class="col-sm-1 text-right d-none d-xl-block d-lg-block d-md-block d-sm-block d-md-none" onclick="getWeek(1)">
            <i class="icon-chevron-right pointer"></i>
          </div>


        </div>
        </div>

        <div class="container show-datetime d-none">
        <div class="row f-18 bold mb-4 mb-4-540">
          <div class="col-1 text-center">&nbsp;</div>
          <div class="col-10 text-center">
            <span class="set-datetime"></span>
          </div>

        </div>
        
        <div class="row">
          <div class="col-12 text-center">
            <button class="btn btn-outline-success px-4 py-2" data-dismiss="modal">{%trans%}next{%endtrans%}</button>
          </div>
          </div>
        </div>

      </div>
    </div>
    <!-- content -->

  </div>
  <!-- dialog -->

</div>
<!-- modal -->
<script>



/*
unavalable='<div class="col-1-7" data-date="'+data.date+'"><p class="mt-2">'+date.dayname+' '+date.daynumber+'</p><div class="mb-2 disabled op-60 btn btn-danger btn-outline-danger px-1 py-1 w-54 h-54"><i class="icon-ban dis-position"></i></div><br></div>'
*/











$('#datetimepicker').datetimepicker({
  format : 'DD/MM/YYYY',
  ignoreReadonly: true,
  defaultDate: '{{ "tomorrow"|date("m/d/Y") }}',
  //viewMode: 'months',
  //inline: true,
  //sideBySide: false,
  /*icons: {
            time: "icon-clock-o",
            date: "icon icon-calendar",
            up: "icon icon-chevron-up",
            down: "icon-chevron-down",
            left: "icon-chevron-left",
            right: "icon-chevron-right"
          },*/
          widgetPositioning: {
            horizontal: 'left',
            vertical: 'bottom'
          },
          //keepOpen: true,
          //enabledDates: date,
          locale: '{{app.request.locale}}',
          //minDate: data.minDate,
          //debug: true,
          //maxDate: date[date.length -1]
        })

$('#datetimepicker').on('dp.change', function(e){
  console.log('get events from: '+ e.date.format(e.date._f)+' --> '+$('.appointment-form').serialize())
  console.log('get data from server and rebuild week stucture')
  
  $('#ftco-loader').css({'opacity' : '0.7','visibility' : 'visible','z-index' : 9999})
  setTimeout(function(){ $('#ftco-loader').css({'opacity' : 0,'visibility' : 'hidden','z-index' : 1000})}, 3500)

})


//boolean 1 = next week || 0 = previous week  
function getWeek(boolean){
  week = boolean ? $( ".col-1-7" ).last() : $( ".col-1-7" ).first()
  $("#datetimepicker").data("DateTimePicker").date($(week).data('date'))
}

  function getEvent(obj){

    $('.btn-primary').addClass('btn-outline-primary')
    e = $(obj).data('evt')
    $(obj).removeClass('btn-outline-primary')
    d = $(obj).data('date')
    $('.set-datetime').html(d)
    $('.show-datetime').removeClass('d-none')
  }



function buildAvailability(arr){

a= 1
  return a
}


$('.show-datetime').addClass('d-none')



</script>

