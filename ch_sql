CREATE TABLE extra_payment (id INT AUTO_INCREMENT NOT NULL, log LONGTEXT NOT NULL, posted_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;

CREATE TABLE stripe_payment_logs (id INT AUTO_INCREMENT NOT NULL, booking_id INT DEFAULT NULL, log LONGTEXT NOT NULL, INDEX IDX_1DE33EB83301C60 (booking_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;

ALTER TABLE stripe_payment_logs ADD CONSTRAINT FK_1DE33EB83301C60 FOREIGN KEY (booking_id) REFERENCES booking (id);

ALTER TABLE booking ADD stripe_payment_logs_id INT DEFAULT NULL, ADD payment_status ENUM('incomplete', 'canceled', 'cleared', 'completed', 'denied', 'failed', 'held', 'paid', 'placed', 'processing', 'refunded', 'refused', 'removed', 'returned', 'reversed', 'unclaimed', 'approved', 'canceled by user', 'pending', 'succeeded', 'partial_refund', 'uncaptured'), ADD deposit_amount INT(11) UNSIGNED COMMENT "(DC2Type:money)" NOT NULL COMMENT '(DC2Type:money)', CHANGE posted_at posted_at DATETIME NOT NULL, CHANGE status status ENUM('pending', 'canceled','confirmed');

ALTER TABLE booking ADD CONSTRAINT FK_E00CEDDED5CAC23A FOREIGN KEY (stripe_payment_logs_id) REFERENCES stripe_payment_logs (id);

CREATE INDEX IDX_E00CEDDED5CAC23A ON booking (stripe_payment_logs_id);

ALTER TABLE category ADD deposit NUMERIC(2, 2) DEFAULT '0.00' NOT NULL;

ALTER TABLE client CHANGE password password LONGTEXT DEFAULT NULL, CHANGE username username LONGTEXT DEFAULT NULL, CHANGE address address LONGTEXT DEFAULT NULL, CHANGE telephone telephone LONGTEXT DEFAULT NULL;

ALTER TABLE logs CHANGE status status ENUM('update', 'create', 'delete');